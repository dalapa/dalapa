
<!DOCTYPE html>
<html lang="en">
<head>
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-147600577-2"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'UA-147600577-2');
    </script>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="account" data="3054">
    <meta name="witel" data="">
    <title>DALAPA - Data Lapangan</title>
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,300,600,700' rel='stylesheet' type='text/css'>
    <link href="https://dalapa.id/assets/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://dalapa.id/assets/css/nifty.min.css" rel="stylesheet">
    <link id="theme" href="https://dalapa.id/assets/css/themes/type-e/theme-well-red.min.css" rel="stylesheet">
    <link href="./assets/plugins/themify-icons/themify-icons.min.css" rel="stylesheet">
    <style>
        body { padding-right: 0 !important }
        .modal-open {
            padding-right: 0px !important;
        }
        .modal {
            overflow-y:auto;
        }
    </style>
    <link href="https://dalapa.id/assets/plugins/bootstrap-datepicker/bootstrap-datepicker.min.css" rel="stylesheet">
<link href="https://dalapa.id/assets/plugins/bootstrap-select/bootstrap-select.min.css" rel="stylesheet">
<link href="./assets/plugins/themify-icons/themify-icons.min.css" rel="stylesheet">
<style>
    .panel .panel-control .nav-tabs>.active>a{
        background-color: #79af3a;
    }
    .btn-warning, .btn-warning:hover, .btn-warning:active, .btn-warning:visited {
        background-color: #EDB425 !important;
    }
    .btn-warning:hover {
        background-color: #E0AA23 !important;
    }
    .btn-xs {
        font-size: 14px !important;
    }
</style>
</head>
<body>
    <div id="container" class="effect aside-float aside-bright mainnav-lg">
        <header id="navbar">
            <div id="navbar-container" class="boxed">
                <div class="navbar-header">
                    <a href="#" class="navbar-brand">
                        <img src="https://dalapa.id/assets/img/dalapa_web.png" alt="Nifty Logo" class="brand-icon">
                        <div class="brand-title">
                            <span class="brand-text">DALAPA</span>
                        </div>
                    </a>
                </div>
                <div class="navbar-content">
                    <ul class="nav navbar-top-links">
                        <li class="tgl-menu-btn">
                            <a class="mainnav-toggle" href="#">
                                <i class="ti-menu"></i>
                            </a>
                        </li>
                        <li>
                            <div class="custom-search-form">
                                <label class="btn btn-trans" for="search-input" data-toggle="collapse" data-target="#nav-searchbox">
                                    <i class="ti-search"></i>
                                </label>
                                <form>
                                    <div class="search-container collapse" id="nav-searchbox">
                                    </div>
                                </form>
                            </div>
                        </li>
                    </ul>
                    <ul class="nav navbar-top-links">
                        <li>
                            <a href="#" class="aside-toggle">
                                <i class="ti-more"></i>
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
        </header>
        <div class="boxed">
            <div id="content-container">
                <div id="page-head">
    <div id="page-title">
        <h1 class="page-header text-overflow">Data Management</h1>
    </div>
    <ol class="breadcrumb">
        <li><a href="https://dalapa.id"><i class="ti-home"></i></a></li>
        <li><a href="#">Data Management</a></li>
        <li class="active">Search Data</li>
    </ol>
</div>
                <div id="page-content">
    <div class="panel" id="filter">
        <div class="panel-heading">
            <h3 class="panel-title">Search Data Filter</h3>
        </div>
        <div class="panel-body">
            <div class="row">
                <div class="col-sm-2">
                    <div class="form-group">
                        <label class="control-label">Filter Berdasarkan</label>
                        <select class="selectpicker form-control" name="jenis_filter">
                            <option value="1">Nama ODP</option>
                            <option value="2">Nomor Layanan</option>
                            <option value="3">Mapping OLT-ODP</option>
                            <option value="4">Valda by Port OLT</option>
                        </select>
                    </div>
                </div>
                <div class="col-sm-9" id="rowFilterValue">
                    <div class="row" id="filterNama">
                        <div class="col-sm-12">
                            <div class="form-group">
                                <label class="control-label">Nama ODP / No.Layanan</label>
                                <input type="text" class="form-control" name="filter_field" placeholder="Contoh : ODP-BAM-FAC/010 atau 161101234567">
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-sm-9" id="rowFilterGPON" style="display:none;">
                    <form action="https://dalapa.id/api/data/olt/export" method="POST" id="formFilterGPON">
                        <div class="row">
                            <div class="col-sm-2">
                                <div class="form-group">
                                    <label class="control-label">Witel</label>
                                    <select class="selectpicker form-control" name="witel_filter">
                                                                                    <option value="BJM">KALSEL</option>
                                                                                    <option value="BPN">BALIKPAPAN</option>
                                                                                    <option value="PLK">KALTENG</option>
                                                                                    <option value="PTK">KALBAR</option>
                                                                                    <option value="SMD">SAMARINDA</option>
                                                                                    <option value="TRK">KALTARA</option>
                                                                            </select>
                                </div>
                            </div>
                            <div class="col-sm-2">
                                <div class="form-group">
                                    <label class="control-label">STO</label>
                                    <select class="selectpicker form-control" name="sto_filter">
                                        <option>-</option>
                                    </select>
                                </div>
                            </div>
                            <div class="col-sm-6">
                                <div class="form-group">
                                    <label class="control-label">GPON</label>
                                    <select class="selectpicker form-control" name="gpon_filter">
                                        <option>-</option>
                                    </select>
                                </div>
                            </div>
                            <div class="col-sm-1">
                                <div class="form-group">
                                    <label class="control-label">Slot</label>
                                    <input type="text" class="form-control" name="slot_gpon">
                                </div>
                            </div>
                            <div class="col-sm-1">
                                <div class="form-group">
                                    <label class="control-label">Port</label>
                                    <input type="text" class="form-control" name="port_gpon">
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="col-sm-1">
                    <div class="form-group">
                        <label class="control-label"><br></label>
                        <button type="button" class="btn btn-success form-control" id="filterODP">Filter</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="panel panel-primary">
        <div class="panel-heading">
            <div class="panel-control">
                <ul class="nav nav-tabs">
                    <li class="active"><a data-toggle="tab" href="#data-compare" aria-expanded="false">Valda by Port OLT</a></li>
                    <li><a data-toggle="tab" href="#data-olt" aria-expanded="false">Mapping OLT-ODP</a></li>
                    <li class=""><a data-toggle="tab" href="#data-lapangan" aria-expanded="true">Data ODP Detail</a></li>
                </ul>
            </div>
        </div>
        <div class="panel-body">
            <div class="tab-content">
                <div id="data-compare" class="tab-pane fade active in">
                    <div class="table-responsive">
                        <table class="table table-striped">
                            <thead>
                                <tr>
                                    <th>GPON</th>
                                    <th>Port</th>
                                    <th>ONU</th>
                                    <th>No Telp</th>
                                    <th>No Inet</th>
                                    <th>QR DC</th>
                                    <th>Status Port</th>
                                    <th>Redaman</th>
                                    <th>ODP Lapangan</th>
                                    <th>ODP UIM</th>
                                    <th>Validitas</th>
                                </tr>
                            </thead>
                            <tbody id="table-body-filter-comparing">
                                <tr>
                                    <td colspan='11'><center>Filter Data ODP Terlebih Dahulu</center></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                <div id="data-olt" class="tab-pane fade">
                                            <div class="row">
                            <div class="col-sm-12">
                                <button class="btn btn-success btn-sm" id="downloadDataOLT">Download Data OLT</button>
                            </div>
                        </div>
                                        <div class="table-responsive">
                        <table class="table table-striped">
                            <thead>
                                <tr id="th-row-gpon">
                                    <th style="color:black;white-space:nowrap;">GPON</th>
                                    <th style="color:black;white-space:nowrap;width:1px;">Port GPON</th>
                                </tr>
                            </thead>
                            <tbody id="table-body-filter-gpon">
                                <tr>
                                    <td colspan='2'><center>Silahkan Filter GPON Terlebih Dahulu</center></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                <div id="data-lapangan" class="tab-pane fade">
                    <div class="row" id="dataDetailInputInfo">
                        <div class="col-sm-3">
                            <div class="form-group">
                                <label class="control-label">Koordinat</label>
                                <input type="text" class="form-control" id="coordinat_odp" disabled>
                            </div>
                        </div>
                        <div class="col-sm-3">
                            <div class="form-group">
                                <label class="control-label">Label ODP</label>
                                <input type="text" class="form-control" id="label_odp" disabled>
                            </div>
                        </div>
                        <div class="col-sm-3">
                            <div class="form-group">
                                <label class="control-label">Kapasitas</label>
                                <input type="text" class="form-control" id="capacity_odp" disabled>
                            </div>
                        </div>
                        <div class="col-sm-3">
                            <div class="form-group">
                                <label class="control-label">Validated Date</label>
                                <input type="text" class="form-control" id="created_date" disabled>
                            </div>
                        </div>
                    </div>
                    <h4>Data Validasi Lapangan</h4>
                    <div class="table-responsive">
                        <table class="table table-striped">
                            <thead>
                                <tr>
                                    <th class="no-sort"><input type="checkbox" id="checkboxPrintAll"></th>
                                    <th style="width:ipx; whitespace:nowrap">ODP</th>
                                    <th style="width:ipx; whitespace:nowrap">Port ODP</th>
                                    <th style="width:ipx; whitespace:nowrap">No.Telepon</th>
                                    <th style="width:ipx; whitespace:nowrap">No.Internet</th>
                                    <th style="width:ipx; whitespace:nowrap">GPON</th>
                                    <th style="width:ipx; whitespace:nowrap">Port</th>
                                    <th style="width:ipx; whitespace:nowrap">SN ONT</th>
                                    <th style="width:ipx; whitespace:nowrap">QR Code Port ODP</th>
                                    <th style="width:ipx; whitespace:nowrap">QR Code Dropcore</th>
                                    <th style="width:ipx; whitespace:nowrap">Status Port</th>
                                    <th style="width:ipx; whitespace:nowrap">Updated date</th>
                                    <th style="width:ipx; whitespace:nowrap">Summary</th>
                                    <th style="width:ipx; whitespace:nowrap">Validitas</th>
                                </tr>
                            </thead>
                            <tbody id="table-body-filter-lapangan">
                                <tr>
                                    <td colspan='12'><center>Filter Data ODP Terlebih Dahulu</center></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                                            <div class="row">
                            <div class="col-sm-12">
                                <button class="btn btn-info btn-sm" id="downloadBulkUIM">Download Bulk UIM</button>
                                <button class="btn btn-success btn-sm" id="downloadBulkDAVA">Download Bulk DAVA</button>
                            </div>
                        </div>
                                        <h4>Data UIM</h4>
                    <div class="table-responsive">
                        <table class="table table-striped">
                            <thead>
                                <tr>
                                    <th>ODP</th>
                                    <th>Port ODP</th>
                                    <th>No. Telepon</th>
                                    <th>No. Internet</th>
                                    <th>GPON</th>
                                    <th>Port GPON</th>
                                    <th>SN ONT</th>
                                    <th>Service</th>
                                    <th>Status</th>
                                    <th>Created Date</th>
                                    <th>Action</th>
                                </tr>
                            </thead>
                            <tbody id="table-body-filter-uim">
                                <tr>
                                    <td colspan='9'><center>Filter Data ODP Terlebih Dahulu</center></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div class="row" style="display:none;">
                        <form action="https://dalapa.id/api/data/stream/print" method="POST" id="formPrintStream">
                            <input type="text" name="type" id="typeStream" value="">
                            <input type="text" name="data" id="dataStream" value="">
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
            </div>
            <nav id="mainnav-container">
                <div id="mainnav">
                    <div id="mainnav-menu-wrap">
                        <div class="nano">
                            <div class="nano-content">
                                <div id="mainnav-profile" class="mainnav-profile">
                                    <div class="profile-wrap text-center">
                                        <div class="pad-btm">
                                            <img class="img-circle img-md" src="https://dalapa.id/assets/img/profile-photos/1.png" alt="Profile Picture">
                                        </div>
                                        <a href="#profile-nav" class="box-block" data-toggle="collapse" aria-expanded="false">
                                            <p class="mnp-name">Amoeba Demo</p>
                                            <span class="mnp-desc"></span>
                                        </a>
                                    </div>
                                    <div id="profile-nav" class="collapse list-group bg-trans"></div>
                                </div>
                                <ul id="mainnav-menu" class="list-group">
                                    <li class="list-header">NAVIGASI</li>
                                    <li class="">
                                        <a href="./mapping-odp.html">
                                            <i class="ti-target"></i>
                                            <span class="menu-title">Mapping OLT</span>
                                        </a>
                                    </li>
                                    <li class="">
                                        <a href="./mapping-pelanggan.html">
                                            <i class="ti-target"></i>
                                            <span class="menu-title">Mapping ODP</span>
                                        </a>
                                    </li>
                                    <li class="">
                                        <a href="./import_odp.html">
                                            <i class="ti-target"></i>
                                            <span class="menu-title">Import Data ODP</span>
                                        </a>
                                    </li>
                                    <li class="">
                                        <a href="./import_port.html">
                                            <i class="ti-target"></i>
                                            <span class="menu-title">Import Data Port ODP</span>
                                        </a>
                                    </li>
                                    <li class="">
                                        <a href="./search-data.html">
                                            <i class="ti-target"></i>
                                            <span class="menu-title">Search Data ODP</span>
                                        </a>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </nav>
        </div>
        <footer id="footer">
            <div class="hide-fixed pull-right pad-rgt">
                <div class="pull-right pad-rgt">Last Update UIM : <strong>21 April 2020 01:31:01</strong></div>
            </div>
            <p class="pad-lft">&#0169; 2020 Regional Access Management Regional VI, Telkom Indonesia</p>
            <div class="pull-right pad-rgt">Last Update : <strong>21 April 2020 01:31:01</strong></div>
        </footer>
        <button class="scroll-top btn">
            <i class="pci-chevron chevron-up"></i>
        </button>
    </div>
    <div id="modalODPReferensi" class="modal fade">
    <div class="modal-dialog modal-lg" style="width:90%;">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><i class="pci-cross pci-circle"></i></button>
                <h4 class="modal-title" id="myLargeModalLabel">Tabel Data ODP Referensi - Kicking UIM</h4>
            </div>
            <div class="modal-body">
                <div class="panel panel-primary">
                    <!--Panel heading-->
                    <div class="panel-heading">
                        <div class="panel-control">
                            <ul class="nav nav-tabs">
                                <li class="active"><a href="#tab-uim" data-toggle="tab">Data UIM</a></li>
                                <li><a href="#tab-ibooster" data-toggle="tab">Data IBooster Netezza</a></li>
                                <li><a href="#tab-nd-ref" data-toggle="tab">ND Referensi</a></li>
                                <li><a href="#tab-odp-ref" data-toggle="tab">ODP Referensi</a></li>
                            </ul>
                        </div>
                        <h3 class="panel-title">Data Detail Pengerjaan</h3>
                    </div>
                    <!--Panel body-->
                    <div class="panel-body">
                        <div class="tab-content">
                            <div class="tab-pane fade in active" id="tab-uim">
                                <form id="formDetailUIM">
                                    <p class="text-main text-semibold text-lg">Service List</p>
                                    <div class="table-responsive">
                                        <table class="table table-striped">
                                            <thead>
                                                <tr>
                                                    <th>Service Name</th>
                                                    <th>Party Name</th>
                                                    <th>Type</th>
                                                    <th>Contact</th>
                                                    <th>Alamat</th>
                                                </tr>
                                            </thead>
                                            <tbody id="table-data-service-list-update">
                                                <tr>
                                                    <td colspan='5'>
                                                        <center>Tidak Ada Data Service</center>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                    <div class="row">

                                    </div>
                                    <p class="text-main text-semibold text-lg">Update Data Pelanggan</p>
                                    <div class="row">
                                        <div class="col-sm-12">
                                            <div class="form-group">
                                                <label class="control-label">Nama Pelanggan</label>
                                                <input type="text" class="form-control" name="nama_pelanggan" autocomplete="off" readonly>
                                            </div>
                                        </div>
                                        <div class="col-sm-12">
                                            <div class="ro">
                                                <label for="">Isikan salah satu dari Voice / Internet Number</label>
                                            </div>
                                            <div class="row">
                                                <div class="col-sm-6">
                                                    <div class="form-group">
                                                        <label class="control-label">Voice Number</label>
                                                        <input type="number" class="form-control" name="voice_number" autocomplete="off" readonly
                                                            placeholder="">
                                                    </div>
                                                </div>
                                                <div class="col-sm-6">
                                                    <div class="form-group">
                                                        <label class="control-label">Internet Number</label>
                                                        <input type="number" class="form-control" name="internet_number" readonly
                                                            autocomplete="off">
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <p class="text-main text-semibold text-lg">Data Alamat Pelanggan</p>
                                    <div class="row">
                                        <div class="col-sm-12">
                                            <div class="form-group">
                                                <label class="control-label">Alamat</label>
                                                <textarea type="text" class="form-control" name="nama_jalan" rows="6" autocomplete="off" placeholder="Contoh : Jl. MT Haryono" readonly></textarea>
                                            </div>
                                        </div>
                                        <div class="col-sm-6">
                                            <div class="form-group">
                                                <label class="control-label">Latitude Rumah</label>
                                                <input type="text" class="form-control" name="lat" autocomplete="off" readonly
                                                    placeholder="Contoh : -3.1443234">
                                            </div>
                                        </div>
                                        <div class="col-sm-6">
                                            <div class="form-group">
                                                <label class="control-label">Longitude Rumah</label>
                                                <input type="text" class="form-control" name="long" autocomplete="off" readonly
                                                    placeholder="Contoh : 114.112322">
                                            </div>
                                        </div>
                                        <div class="col-sm-12">
                                            <div class="form-group">
                                                <label class="control-label">Kontak Pelanggan</label>
                                                <input type="text" class="form-control" name="kontak_pelanggan" autocomplete="off" readonly>
                                            </div>
                                        </div>
                                    </div>
                                    <p class="text-main text-semibold text-lg">Update Data Teknis</p>
                                    <div class="row">
                                        <div class="col-sm-12">
                                            <div class="form-group">
                                                <label class="control-label">SN ONT</label>
                                                <input type="text" class="form-control" name="sn_ont" autocomplete="off" readonly>
                                            </div>
                                        </div>
                                        <div class="col-sm-6">
                                            <div class="form-group">
                                                <label class="control-label">QR Code Port ODP *</label>
                                                <input type="text" class="form-control" name="qr_code_port_odp" autocomplete="off" readonly
                                                    required>
                                            </div>
                                        </div>
                                        <div class="col-sm-6">
                                            <div class="form-group">
                                                <label class="control-label">QR Code Dropcore</label>
                                                <input type="text" class="form-control" name="qr_code_dropcore" autocomplete="off" readonly
                                                    required>
                                            </div>
                                        </div>
                                        <div class="col-sm-12">
                                            <div class="form-group">
                                                <label class="control-label">Catatan</label>
                                                <textarea type="text" class="form-control" name="catatan" autocomplete="off" rows="3" readonly
                                                    placeholder="Catatan dari Teknisi"></textarea>
                                            </div>
                                        </div>
                                    </div>
                                    <p class="text-main text-semibold text-lg">Upload Foto</p>
                                    <div class="row" id="imagePreviewPort">
                                        <div class="col-sm-6">
                                            <p class="text-main text-semibold text-md">Foto Rumah Pelanggan</p>
                                            <center><img id="foto_rumah" class="img-responsive viewer"
                                                    src="http://localhost/DALAPA/public/assets/img/image_preview.png" alt="Foto" required></center>
                                            <br>
                                        </div>
                                    </div>
					            </form>
                            </div>
                            <div class="tab-pane fade" id="tab-ibooster">
                                <form id="formDetailIbooster">
                                    <div class="row">
                                        <h4>Data Pelanggan</h4>
                                        <div class="col-sm-6">
                                            <div class="form-group">
                                                <label class="control-label">ND Inet</label>
                                                <input type="text" class="form-control" disabled id="nd_inet">
                                            </div>
                                        </div>
                                        <div class="col-sm-6">
                                            <div class="form-group">
                                                <label class="control-label">Tanggal Ukur</label>
                                                <input type="text" class="form-control" disabled id="tanggal_ukur">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <h4>Data GPON</h4>
                                        <div class="col-sm-6">
                                            <div class="form-group">
                                                <label class="control-label">GPON</label>
                                                <input type="text" class="form-control" disabled id="gpon">
                                            </div>
                                        </div>
                                        <div class="col-sm-6">
                                            <div class="form-group">
                                                <label class="control-label">Port</label>
                                                <input type="text" class="form-control" disabled id="gpon_port">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <h4>Data ONU</h4>
                                        <div class="col-sm-6">
                                            <div class="form-group">
                                                <label class="control-label">ONU</label>
                                                <input type="text" class="form-control" disabled id="onu">
                                            </div>
                                        </div>
                                        <div class="col-sm-6">
                                            <div class="form-group">
                                                <label class="control-label">ONU Description</label>
                                                <input type="text" class="form-control" disabled id="onu_description">
                                            </div>
                                        </div>
                                        <div class="col-sm-4">
                                            <div class="form-group">
                                                <label class="control-label">ONU Type</label>
                                                <input type="text" class="form-control" disabled id="onu_type">
                                            </div>
                                        </div>
                                        <div class="col-sm-4">
                                            <div class="form-group">
                                                <label class="control-label">ONU SN</label>
                                                <input type="text" class="form-control" disabled id="onu_sn">
                                            </div>
                                        </div>
                                        <div class="col-sm-4">
                                            <div class="form-group">
                                                <label class="control-label">ONU Status</label>
                                                <input type="text" class="form-control" disabled id="onu_status">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <h4>Data Status</h4>
                                        <div class="col-sm-2">
                                            <div class="form-group">
                                                <label class="control-label">RX Power ONU</label>
                                                <input type="text" class="form-control" disabled id="rx_power_onu">
                                            </div>
                                        </div>
                                        <div class="col-sm-2">
                                            <div class="form-group">
                                                <label class="control-label">RX Power OLT</label>
                                                <input type="text" class="form-control" disabled id="rx_power_olt">
                                            </div>
                                        </div>
                                        <div class="col-sm-2">
                                            <div class="form-group">
                                                <label class="control-label">Status Ukur ONU</label>
                                                <input type="text" class="form-control" disabled id="status_ukur_onu">
                                            </div>
                                        </div>
                                        <div class="col-sm-2">
                                            <div class="form-group">
                                                <label class="control-label">Status Ukur</label>
                                                <input type="text" class="form-control" disabled id="status_ukur">
                                            </div>
                                        </div>
                                        <div class="col-sm-2">
                                            <div class="form-group">
                                                <label class="control-label">ALPRO</label>
                                                <input type="text" class="form-control" disabled id="alpro">
                                            </div>
                                        </div>
                                        <div class="col-sm-2">
                                            <div class="form-group">
                                                <label class="control-label">IS Indihome</label>
                                                <input type="text" class="form-control" disabled id="is_indihome">
                                            </div>
                                        </div>
                                    </div>
					            </form>
                            </div>
                            <div class="tab-pane fade" id="tab-nd-ref">
                                <div class="table-responsive">
                                    <table class="table table-bordered">
                                        <thead>
                                            <tr>
                                                <th class="text-center">#</th>
                                                <th class="text-center">ND Inet</th>
                                                <th class="text-center">Tanggal Ukur</th>
                                                <th class="text-center">GPON</th>
                                                <th class="text-center">Port</th>
                                                <th class="text-center">ODP Location</th>
                                                <th class="text-center" style="width:1px;white-space:nowrap;">Action</th>
                                            </tr>
                                        </thead>
                                        <tbody id="tbody-nd-ref"></tbody>
                                    </table>
                                </div>
                            </div>
                            <div class="tab-pane fade" id="tab-odp-ref">
                                <div class="table-responsive">
                                    <table class="table table-bordered">
                                        <thead>
                                            <tr>
                                                <th class="text-center">ODP Referensi</th>
                                                <th class="text-center" style="width:1px;">Action</th>
                                            </tr>
                                        </thead>
                                        <tbody id="tbody-odp-ref"></tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-warning" id="backDetailODP" data-dismiss="modal">Kembali</button>
            </div>
        </div>
    </div>
</div>
<div id="modalDetailNDReferensi" class="modal fade">
    <div class="modal-dialog modal-lg" style="width:90%;">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><i class="pci-cross pci-circle"></i></button>
                <h4 class="modal-title" id="myLargeModalLabel">Tabel Data ND Referensi UIM</h4>
            </div>
            <div class="modal-body">
                <p class="text-main text-semibold text-lg">Informasi Data Pelanggan</p>
                <div class="row">
                    <div class="col-sm-12">
                        <div class="form-group">
                            <label class="control-label">Status Port</label>
                            <input type="text" class="form-control" name="type" autocomplete="off" disabled>
                        </div>
                    </div>
                    <div class="col-sm-12">
                        <div class="form-group">
                            <label class="control-label">Tanggal Update</label>
                            <input type="text" class="form-control" name="tanggal_pengerjaan" autocomplete="off" disabled>
                        </div>
                    </div>
                </div>
                <p class="text-main text-semibold text-lg">Data Pelanggan</p>
                <div class="row">
                    <div class="col-sm-12">
                        <div class="form-group">
                            <label class="control-label">Nama Pelanggan</label>
                            <input type="text" class="form-control" name="nama_pelanggan" autocomplete="off" disabled>
                        </div>
                    </div>
                    <div class="col-sm-12">
                        <div class="row">
                            <div class="col-sm-12">
                                <div class="form-group">
                                    <label class="control-label">Internet Number</label>
                                    <input type="number" class="form-control" name="internet_number" autocomplete="off" disabled>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <p class="text-main text-semibold text-lg">Data Alamat Pelanggan</p>
                <div class="row">

                    <div class="col-sm-12">
                        <div class="form-group">
                            <label class="control-label">Nama Jalan</label>
                            <input type="text" class="form-control" name="nama_jalan" autocomplete="off" disabled>
                        </div>
                    </div>

                    <div class="col-sm-6">
                        <div class="form-group">
                            <label class="control-label">Latitude Rumah</label>
                            <input type="text" class="form-control" name="lat" autocomplete="off" disabled>
                        </div>
                    </div>
                    <div class="col-sm-6">
                        <div class="form-group">
                            <label class="control-label">Longitude Rumah</label>
                            <input type="text" class="form-control" name="long" autocomplete="off" disabled>
                        </div>
                    </div>
                    <div class="col-sm-12">
                        <div class="form-group">
                            <label class="control-label">Kontak Pelanggan</label>
                            <input type="text" class="form-control" name="kontak_pelanggan" autocomplete="off" disabled>
                        </div>
                    </div>

                </div>
                <p class="text-main text-semibold text-lg">Data Teknis</p>
                <div class="row">
                    <div class="col-sm-12">
                        <div class="form-group">
                            <label class="control-label">SN ONT</label>
                            <input type="text" class="form-control" name="sn_ont" autocomplete="off" disabled>
                        </div>
                    </div>
                    <div class="col-sm-6">
                        <div class="form-group">
                            <label class="control-label">QR Code Port ODP</label>
                            <input type="text" class="form-control" name="qr_code_port_odp" autocomplete="off" disabled>
                        </div>
                    </div>
                    <div class="col-sm-6">
                        <div class="form-group">
                            <label class="control-label">QR Code Dropcore</label>
                            <input type="text" class="form-control" name="qr_code_dropcore" autocomplete="off" disabled>
                        </div>
                    </div>
                </div>
                <p class="text-main text-semibold text-lg">Data IBooster</p>
                <div class="row">
                    <div class="col-sm-6">
                        <div class="form-group">
                            <label class="control-label">SP Target</label>
                            <input readonly type="text" class="form-control" name="ibooster_clid" autocomplete="off" disabled>
                        </div>
                    </div>
                    <div class="col-sm-6">
                        <div class="form-group">
                            <label class="control-label">SP Port</label>
                            <input readonly type="text" class="form-control" name="ibooster_hostname" autocomplete="off" disabled>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-12">
                        <div class="form-group">
                            <label class="control-label">IBooster Data</label>
                            <textarea name="ibooster_data" rows="3" disabled></textarea>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-warning" id="backDetailODP" data-dismiss="modal">Kembali</button>
            </div>
        </div>
    </div>
</div>
<div id="modalDetailODPReferensi" class="modal fade">
    <div class="modal-dialog modal-lg" style="width:90%;">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><i class="pci-cross pci-circle"></i></button>
                <h4 class="modal-title" id="myLargeModalLabel">Tabel Data ODP Referensi - Kicking UIM</h4>
            </div>
            <div class="modal-body">
                <h4>Data Validasi Lapangan</h4>
                <div class="table-responsive">
                    <table class="table table-striped">
                        <thead>
                            <tr>
                                <th>ODP</th>
                                <th>Port ODP</th>
                                <th>No.Telepon</th>
                                <th>No.Internet</th>
                                <th>GPON</th>
                                <th>Port</th>
                                <th>SN ONT</th>
                                <th>QR Code Port ODP</th>
                                <th>QR Code Dropcore</th>
                                <th>Status Port</th>
                                <th>Action</th>
                            </tr>
                        </thead>
                        <tbody id="tbodyDetailODPLapangan">
                            <tr>
                                <td colspan='12'><center>Filter Data ODP Terlebih Dahulu</center></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <h4>Data UIM</h4>
                <div class="table-responsive">
                    <table class="table table-striped">
                        <thead>
                            <tr>
                                <th>ODP</th>
                                <th>Port ODP</th>
                                <th>No. Telepon</th>
                                <th>No. Internet</th>
                                <th>GPON</th>
                                <th>Port GPON</th>
                                <th>SN ONT</th>
                                <th>Service</th>
                                <th>Status</th>
                            </tr>
                        </thead>
                        <tbody id="tbodyDetailODPUIM">
                            <tr>
                                <td colspan='9'><center>Filter Data ODP Terlebih Dahulu</center></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-warning" id="backDetailODP" data-dismiss="modal">Kembali</button>
            </div>
        </div>
    </div>
</div>

    <script src="https://dalapa.id/assets/js/jquery.min.js"></script>
    <script src="https://dalapa.id/assets/js/bootstrap.min.js"></script>
    <script src="https://dalapa.id/assets/js/nifty.min.js"></script>
    <script>
    let BASE_URL_API = "https://dalapa.id/api/";
    let BASE_URL = "https://dalapa.id/";
    </script>
     <script src="https://dalapa.id/assets/plugins/loadingOverlay/loadingoverlay.min.js"></script>
     <script>
         $.ajaxSetup({
            headers: {
                'Authorization':$('meta[name=account]').attr('data'),
                'AuthWitel':$('meta[name=witel]').attr('data')
            }
        });
         $(document).ajaxStart(function () {
             $.LoadingOverlay("show");
         }).ajaxComplete(function () {
             $.LoadingOverlay("hide");
         });
     </script>
     <script src="https://dalapa.id/assets/plugins/bootbox/bootbox.min.js"></script>
<script src="https://dalapa.id/assets/plugins/bootstrap-datepicker/bootstrap-datepicker.min.js"></script>
<script src="https://dalapa.id/assets/plugins/bootstrap-select/bootstrap-select.min.js"></script>
<script>
    let service_party = null;

    const buttonFilter = $('#filterODP');
    const tableLapangan = $('#table-body-filter-lapangan');
    const tableUIM = $('#table-body-filter-uim');
    const tableCompare = $('#table-body-filter-comparing');
    const type = $('select[name=jenis_filter]');
    const witel = $('select[name=witel_filter]');
    const nama = $('input[name=filter_field]');
    const port_gpon = $('input[name=port_gpon]');
    const slot_gpon = $('input[name=slot_gpon]');
    const port = $('#rowFilterPort');
    const row = $('#rowFilterValue');
    const detailInput = $('#dataDetailInputInfo');
    const coordinatOdp = $('#coordinat_odp');
    const labelOdp = $('#label_odp');
    const capacityOdp = $('#capacity_odp');
    const dateOdp = $('#created_date');

    let selectSto = $('select[name=sto_filter]');
    let selectGPON = $('select[name=gpon_filter]');

    let modalReferensi = $('#modalODPReferensi');
    let modalDetailODPReferensi = $('#modalDetailODPReferensi')
    let tbodyNDRef = $('#tbody-nd-ref');
    let tbodyODPRef = $('#tbody-odp-ref');
    let formDetailUIM = $('#formDetailUIM');
    let formDetailIbooster = $('#formDetailIbooster');

    let tbodyDetailODPUIM = $('#tbodyDetailODPUIM');
    let tbodyDetailODPLapangan = $('#tbodyDetailODPLapangan');
    $(document).ready(function(){
        $('#checkboxPrintAll').click(function(){
            let check = $(this).is(':checked');
            $(".checkboxPrint").prop('checked',check);
        });
        $('#downloadBulkUIM').click(function(){
            let id = [];
            $('.checkboxPrint:checked').each(function(){
                id.push($(this).val());
            });
            $.post(BASE_URL_API + "data/bulk/generateBulkUIM",{'id':id},function(res){
                if(res.status){
                    $.niftyNoty({
                        type: 'success',
                        icon: 'pli-like-2 icon-2x',
                        message: res.message,
                        container: 'floating',
                        timer: 5000
                    });
                    window.open(res.link, '_blank');
                }else{
                    $.niftyNoty({
                        type: 'danger',
                        icon: 'pli-like-2 icon-2x',
                        message: res.message,
                        container: 'floating',
                        timer: 5000
                    });
                }
            });
        });
        $('#downloadBulkDAVA').click(function(){
            let id = [];
            $('.checkboxPrint:checked').each(function(){
                id.push($(this).val());
            });
            if(id.length>0){
                $('#typeStream').val(2);
                $('#dataStream').val(id.join(","));
                $('#formPrintStream').submit();
            }
        });
        $('#downloadDataOLT').click(function(){
            $('#formFilterGPON').submit();
        });
        modalDetailODPReferensi.on('hidden.bs.modal',function(){
            modalReferensi.modal('show');
        });
        filterSTO(witel.val());
    });
    buttonFilter.click(function(){
        if(type.val()=='3'){
            getGPON();
        }else if(type.val()=='4'){
            let olt_name = $('select[name=gpon_filter] option:selected').text();
            getCompare(olt_name,slot_gpon.val(),port_gpon.val());
        }else{
            if(type.val()==="1"){
                if(nama.val().indexOf("/") > -1){
                    getODP();
                }else{
                    $.niftyNoty({
                        type: 'warning',
                        icon: 'pli-like-2 icon-2x',
                        message: 'Contoh Nama ODP Yang Benar : <b>ODP-BAM-FAC/010</b>',
                        container: 'floating'
                    });
                }
            }else{
                getODP();
            }
        }
    });
    type.change(function(){
        if((type.val()=="3") || (type.val()=="4")){
            $('#rowFilterGPON').show();
            $('#rowFilterValue').hide();
        }else{
            $('#rowFilterValue').show();
            $('#rowFilterGPON').hide();
        }
        if(type.val() == "1"|| type.val() == 1){
            detailInput.show();
        }else{
            detailInput.hide();
        }
    });
    witel.change(function(){
        let id_witel_data = $(this).val();
        filterSTO(id_witel_data);
    });
    selectSto.change(function(){
        let sto = $('select[name=sto_filter] option:selected').text();
        filterGPON(sto);
    });
    $(document).on('click','.detailPelanggan',function(){
        let name = $(this).attr('data-odp');
        let type = 1;
        $.post(BASE_URL_API + "odp/search",{
            'type':type,
            'name':name
        },function(response){
            let uim = response.uim;
            let dalapa = response.dalapa;
            if(uim.length>0){
                renderUIM(uim,dalapa);
            }else{
                tableUIM.html(`<tr><td colspan='9'><center>ODP Tidak ditemukan</center></td></tr>`);
            }
            if(dalapa.length>0){
                renderLapangan(dalapa,uim);
            }else{
                tableLapangan.html(`<tr><td colspan='12'><center>ODP Tidak ditemukan</center></td></tr>`);
            }
            $('.nav-tabs a[href="#data-lapangan"]').tab('show');
        });
    });
    $(document).on('click','.accessCompare',function(){
        let olt_name = $('select[name=gpon_filter] option:selected').text();
        let slot = $(this).attr('data-slot');
        let port = $(this).attr('data-port');
        getCompare(olt_name,slot,port);
    });
    $(document).on('click','.ref',function(){
        let nd = $(this).attr('data-nd');
        let voice = $(this).attr('data-voice');
        service_party = $(this).attr('data-service');
        $.post(BASE_URL_API + "data/alternative/getODP",{
            'internet_number':nd,
            'voice_number':voice,
        },function(res){
            let ib = res.data.ibooster;
            $('#formDetailIbooster input#nd_inet').val(ib.nd_inet);
            $('#formDetailIbooster input#tanggal_ukur').val(ib.tanggal_ukur);
            $('#formDetailIbooster input#gpon').val(ib.clid);
            $('#formDetailIbooster input#gpon_port').val(`1-${ib.slot}-${ib.port}`);
            $('#formDetailIbooster input#onu').val(ib.onu);
            $('#formDetailIbooster input#onu_description').val(ib.onu_description);
            $('#formDetailIbooster input#onu_type').val(ib.onu_type);
            $('#formDetailIbooster input#onu_sn').val(ib.onu_sn);
            $('#formDetailIbooster input#onu_status').val(ib.onu_status);
            $('#formDetailIbooster input#rx_power_onu').val(ib.rx_power_onu);
            $('#formDetailIbooster input#rx_power_olt').val(ib.rx_power_olt);
            $('#formDetailIbooster input#status_ukur_onu').val(ib.status_ukur_onu);
            $('#formDetailIbooster input#status_ukur').val(ib.status_ukur);
            $('#formDetailIbooster input#alpro').val(ib.alpro);
            $('#formDetailIbooster input#is_indihome').val(ib.is_indihome);
            tbodyNDRef.empty();
            if(res.data.list.length>0){
                $.each(res.data.list,function(k,v){
                    tbodyNDRef.append(`
                        <tr>
                            <td class="text-center">${(k+1)}</td>
                            <td>${v.nd_inet}</td>
                            <td>${v.tanggal_ukur}</td>
                            <td class="text-center">${v.clid}</td>
                            <td class="text-center">1-${v.slot}-${v.port}</td>
                            <td class="text-center">${v.odp_location != null ? v.odp_location : ''}</td>
                            <td class="text-center" style="width:1px;white-space:nowrap;">
                                ${v.odp_id!=null ? `<button class="btn btn-xs btn-mint detailODPRef" data-id="${v.odp_id}">Detail ODP</button>` : '' }
                                <button class="btn btn-xs btn-warning detailNDRef" data-id="${v.nd_inet}">Detail Pelanggan</button>
                            </td>
                        </tr>
                    `);
                });
            }else{
                tbodyNDRef.append(`<tr><td colspan='7'><center>Tidak ada ND Ibooster References</center></td></tr>`);
            }
            tbodyODPRef.empty();
            if(res.data.references.length>0){
                $.each(res.data.references,function(k,v){
                    tbodyODPRef.append(`
                        <tr>
                            <td>${v.odp_location}</td>
                            <td><button class="btn btn-xs btn-mint detailODPRef" data-id="${v.odp_id}">Detail ODP</button></td>
                        </tr>
                    `);
                });
            }else{
                tbodyODPRef.append(`<tr><td colspan='2'><center>Tidak ada ND Ibooster References</center></td></tr>`);
            }
        }).done(function(){
            modalReferensi.modal('show');
        });
    });
    $(document).on('click','.makeBulk',function(){
        let port_id = $(this).attr('data-port-id');
        $.post(BASE_URL_API + "data/bulk/generateBulkUIMKick",{'service_party':service_party,'port_id':port_id},function(res){
            if(res.status){
                $.niftyNoty({
                    type: 'success',
                    icon: 'pli-like-2 icon-2x',
                    message: res.message,
                    container: 'floating',
                    timer: 5000
                });
                window.open(res.link, '_blank');
            }else{
                $.niftyNoty({
                    type: 'danger',
                    icon: 'pli-like-2 icon-2x',
                    message: res.message,
                    container: 'floating',
                    timer: 5000
                });
            }
        });
    });
    $(document).on('click','.detailODPRef',function(){
        let id = $(this).attr('data-id');
        $.post(BASE_URL_API + "data/alternative/detailODP",{'odp_id':id},function(res){
            tbodyDetailODPUIM.empty();
            tbodyDetailODPLapangan.empty();
            if(res.uim.length>0){
                $.each(res.uim,function(k,v){
                    tbodyDetailODPUIM.append(`
                        <tr>
                            <td>${v.odp_location}</td>
                            <td>${v.odp_port}</td>
                            <td>${(v.voice_number != null ? v.voice_number : "")}</td>
                            <td>${(v.internet_number != null ? v.internet_number : "")}</td>
                            <td>${v.gpon}</td>
                            <td>${(v.port_gpon != null ? v.port_gpon : "")}</td>
                            <td>${(v.cpe_sn != null ? v.cpe_sn : "")}</td>
                            <td>${(v.service != null ? v.service : "")}</td>
                            <td>${v.status_uim}</td>
                        </tr>
                    `);
                });
            }else{
                tbodyDetailODPUIM.append(`
                    <tr><td colspan='11'><center>Tidak Ada Data ODP UIM</center></td></tr>
                `);
            }
            if(res.dalapa.length>0){
                $.each(res.dalapa,function(k,v){
                    tbodyDetailODPLapangan.append(`
                        <tr>
                            <td>${v.odp_location}</td>
                            <td>${v.port_number_uim}</td>
                            <td>${(v.voice_number != null ? v.voice_number : '-')}</td>
                            <td>${(v.internet_number != null ? v.internet_number : '-')}</td>
                            <td>${(v.gpon_clid != null ? v.gpon_clid : "")}</td>
                            <td>${v.gpon_clid != null ? "1-"+v.gpon_slot+"-"+v.gpon_port : ""}</td>
                            <td>${(v.sn_ont != null ? v.sn_ont : '-')}</td>
                            <td>${(v.qr_code_port_odp != null ? v.qr_code_port_odp : '-')}</td>
                            <td>${(v.qr_code_dropcore != null ? v.qr_code_dropcore : '-')}</td>
                            <td>${(v.type==1 ? 'Teridentifikasi' : (v.type==2?'Tidak Teridentifikasi':(v.type==3?'Rusak':(v.type==4?'Idle':(v.type==5?'Node-B':'Tidak Teridentifikasi')))))}</td>
                            <td><button class="btn btn-warning btn-xs makeBulk" data-port-id="${v.odp_port_id}">BULK</button></td>
                        </tr>
                    `);
                });
            }else{
                tbodyDetailODPLapangan.append(`
                    <tr>
                        <td colspan='9'><center>Tidak Ada Data ODP Lapangan</center></td>
                    </tr>
                `);
            }
        }).done(function(){
            modalReferensi.modal('hide');
            modalDetailODPReferensi.modal('show');
        });
    });
    function filterSTO(id){
        selectSto.empty();
        $.post(BASE_URL_API + "data/filterSTO",{'id_witel_data':id},function(res){
            $.each(res,function(k,v){
                selectSto.append($('<option>', {
                    value: v.id_sto,
                    text: v.sto_name
                }));
            });
        }).done(function(){
            selectSto.selectpicker('refresh');
            filterGPON($('select[name=sto_filter] option:selected').text())
        });
    }
    function filterGPON(sto){
        selectGPON.empty();
        $.post(BASE_URL_API + "data/olt/filter",{'sto':sto},function(res){
            $.each(res.data,function(k,v){
                selectGPON.append($('<option>', {
                    text: v.clid
                }));
            });
        }).done(function(){
            selectGPON.selectpicker('refresh');
        });
    }
    function renderUIM(data,dalapa){
        tableUIM.empty();
        $.each(data,function(k,v){
            let status = false;
            let created_date = `<strong>-</strong>`;
            if(type.val() == '1'){
                created_date = v.created_date;
            }
            dalapa.map(function(value){
                if(v.internet_number != null){
                    if(parseInt(value.internet_number)==parseInt(v.internet_number) || parseInt(value.voice_number) == parseInt(v.internet_number)){
                        status = true;
                    }
                }
                if(v.voice_number != null){
                    if(parseInt(value.internet_number)==parseInt(v.voice_number) || parseInt(value.voice_number) == parseInt(v.voice_number)){
                        status = true;
                    }
                }
            });
            tableUIM.append(`
                <tr>
                    <td>${v.odp_location}</td>
                    <td>Port ${v.odp_port}</td>
                    <td>${(v.voice_number!=null ? v.voice_number : '-')}</td>
                    <td>${(v.internet_number!=null ? v.internet_number : '-')}</td>
                    <td>${v.gpon}</td>
                    <td>${v.port_gpon}</td>
                    <td>${v.cpe_sn}</td>
                    <td>${v.service}</td>
                    <td>${v.status_uim}</td>
                    <td>${created_date}</td>
                    <td><button class="btn ${status ? 'btn-success' : 'btn-danger'} btn-sm ref" style="padding:2px 10px" data-nd="${v.internet_number}" data-voice="${v.voice_number}" data-service="${v.service_party}">REF</button></td>
                </tr>
            `);
        });
    }
    function renderLapangan(data,uim){
        tableLapangan.empty();
        $.each(data,function(k,v){
            let status = false;
            let update_date = `<strong>-</strong>`;
            uim.map(function(value){
                if(v.internet_number!=null){
                    if(parseInt(value.internet_number)==parseInt(v.internet_number) || parseInt(value.voice_number) == parseInt(v.internet_number)){
                        status = true;
                    }
                }
                if(v.voice_number!=null){
                    if(parseInt(value.internet_number)==parseInt(v.voice_number) || parseInt(value.voice_number) == parseInt(v.voice_number)){
                        status = true;
                    }
                }
            });
            let port = '-';
            if((v.gpon_port != null && v.gpon_port != "") && (v.gpon_slot != null && v.gpon_slot != "")){
                port = `1-${v.gpon_slot}-${v.gpon_port}`;
            }

            let tamp_date = v.date_update;
            let date_update = `<strong>-</strong>`;
            if (type.val() == '1') {
                if (tamp_date != null) {
                    date_update = tamp_date.split("-").reverse().join("-");
                }
            }

            tableLapangan.append(`
                <tr>
                    <td style="white-space:nowrap;" for="checkboxPrint">
                        <input name="print[]" type="checkbox" class="checkboxPrint" value="${v.id_port_update_request}">
                    </td>
                    <td>${v.odp_location}</td>
                    <td>Port ${(v.odp_port_number == null ? v.port_number_uim : v.odp_port_number)}</td>
                    <td>${(v.voice_number == null ? '-' : v.voice_number )}</td>
                    <td>${(v.internet_number == null ? '-' : v.internet_number )}</td>
                    <td>${(v.gpon_clid == null ? '-' : v.gpon_clid )}</td>
                    <td>${port}</td>
                    <td>${(v.sn_ont == null ? '-' : v.sn_ont)}</td>
                    <td>${(v.qr_code_port_odp == null ? '-' : v.qr_code_port_odp)}</td>
                    <td>${(v.qr_code_dropcore == null ? '-' : v.qr_code_dropcore)}</td>
                    <td>${(v.type==1 ? 'Teridentifikasi' : (v.type==2?'Tidak Teridentifikasi':(v.type==3?'Rusak':(v.type==4?'Idle':'Node-B'))))}</td>
                    <td>${date_update}</td>
                    <td>${(v.summary_id != null ? v.summary_id : '-')}</td>
                    <td><button class='btn ${status ? 'btn-success' : 'btn-danger'} btn-sm btn-block' style="padding:2px 10px">${status ? 'Valid' : 'Not Valid'}</button></td>
                </tr>
            `);
        });
    }
    function getODP(){
        $.post(BASE_URL_API + "odp/search",{
            'type':type.val(),
            'name':nama.val()
        },function(response){
            let uim = response.uim;
            let dalapa = response.dalapa;
            let coorLat = '';
            let coorLong = '';
            let capacity = '';
            let label = '';

            if (response.coorCapacity != null) {
                coorLat = response.coorCapacity.latitude;
                coorLong = response.coorCapacity.longitude;
                capacity = response.coorCapacity.total;
            }
            if (response.label != null) {
                label = response.label.labc_name;
            }
            coordinatOdp.val(coorLat + ', ' + coorLong);
            capacityOdp.val(capacity);
            labelOdp.val(label);
            if (type.val() === "1") {
                dateOdp.val(response.created_date);
            }else {
                dateOdp.val(`<strong>-</strong>`);
            }

            if(uim.length>0){
                renderUIM(uim,dalapa);
            }else{
                tableUIM.html(`<tr><td colspan='9'><center>ODP Tidak ditemukan</center></td></tr>`);
            }
            if(dalapa.length>0){
                renderLapangan(dalapa,uim);
            }else{
                tableLapangan.html(`<tr><td colspan='12'><center>ODP Tidak ditemukan</center></td></tr>`);
            }
        }).done(function(){
            $('.nav-tabs a[href="#data-lapangan"]').tab('show');
        });
    }
    function getGPON(){
        let olt_name = $('select[name=gpon_filter] option:selected').text();
        $.post(BASE_URL_API + "data/olt/getODP",{
            'olt':olt_name,
            'slot':slot_gpon.val(),
            'port':port_gpon.val()
        },function(response){
            $('#th-row-gpon').empty();
            $('#table-body-filter-gpon').empty();
            let data = response.data;
            let max = response.max;
            $('#th-row-gpon').append(`
                <th>GPON</th>
                <th style="color:black;white-space:nowrap;width:1px;">Port GPON</th>
            `);
            for (let index = 1; index <= max; index++) {
                $('#th-row-gpon').append(`<th style="color:black;white-space:nowrap;width:1px;"><center>ODP ${index}</center></th>`);
            }
            $('#th-row-gpon').append(`<th style="color:black;white-space:nowrap;width:1px;"><center>Summary</center></th>`);
            $.each(data,function(keyData,valueData){
                $.each(valueData,function(keyPort,valuePort){
                    let row = "";
                    row += "<tr>";
                    row += `<td style="color:black;white-space:nowrap;">${olt_name}</td>`;
                    row += `<td style="color:black;white-space:nowrap;"><button class="btn btn-xs btn-block btn-mint accessCompare" data-slot="${keyData}" data-port="${keyPort}">1-${keyData}-${keyPort}</button></td>`;
                    $.each(valuePort['data'],function(keyODP,valueODP){
                        let classStat = null;
                        switch (valueODP['status']) {
                            case 'valid':
                                classStat = "btn btn-success btn-xs detailPelanggan";
                                break;
                            case 'not_valid':
                                classStat = "btn btn-danger btn-xs detailPelanggan";
                                break;
                            case 'over':
                                classStat = "btn btn-warning btn-xs detailPelanggan";
                                break;
                            case 'check_field':
                                classStat = "btn btn-warning btn-xs detailPelanggan";
                                break;
                        }
                        row += `<td style="color:black;white-space:nowrap;"><center><button class="${classStat}" data-odp="${valueODP['value']}">${valueODP['value']}</button></center></td>`;
                    });
                    let length = valuePort['data'].length;
                    for (length; length < max; length++) {
                        row += `<td style="color:black;white-space:nowrap;"><center>-</center></td>`;
                    }
                    let statButton = null;
                    switch (valuePort['stat']) {
                        case 'VALID':
                            statButton = "<button class='btn btn-success btn-block btn-xs'>VALID</button>";
                            break;
                        case 'CEK LAPANGAN':
                            statButton = "<button class='btn btn-warning btn-block btn-xs'>CEK LAPANGAN</button>";
                            break;
                        case 'TIDAK VALID':
                            statButton = "<button class='btn btn-danger btn-block btn-xs'>TIDAK VALID</button>";
                            break;

                        default:
                            break;
                    }
                    row += `<td style="color:black;white-space:nowrap;"><center><b>${statButton}</b></center></td>`;
                    row += "</tr>";
                    $('#table-body-filter-gpon').append(row);
                });
            });
        }).done(function(){
            $('.nav-tabs a[href="#data-olt"]').tab('show');
        });
    }
    function getCompare(olt,slot,port){
        $.post(BASE_URL_API + "data/olt/compare",{
            'olt':olt,
            'slot':slot,
            'port':port
        },function(response){
            if(response.status){
                tableCompare.empty();
                $.each(response.data,function(key,value){
                    let odp_lapangan = "";
                    let odp_uim = "";
                    let validitas = null;
                    let status = null;
                    if((value.odp_location_lapangan != null) && (value.odp_location_uim != null)){
                        if(value.odp_location_lapangan === value.odp_location_uim){
                            odp_lapangan = `<button class='btn btn-success btn-xs detailPelanggan' data-odp="${value.odp_location_lapangan}">${value.odp_location_lapangan}</button>`;
                            odp_uim = `<button class='btn btn-success btn-xs detailPelanggan' data-odp="${value.odp_location_uim}">${value.odp_location_uim}</button>`;
                            validitas = "<button class='btn btn-success btn-xs btn-block'>OK</button>";
                        }else{
                            odp_lapangan = `<button class='btn btn-danger btn-xs detailPelanggan' data-odp="${value.odp_location_lapangan}">${value.odp_location_lapangan}</button>`;
                            odp_uim = `<button class='btn btn-danger btn-xs detailPelanggan' data-odp="${value.odp_location_uim}">${value.odp_location_uim}</button>`;
                            validitas = "<button class='btn btn-danger btn-xs btn-block'>NO</button>";
                        }
                    }else{
                        validitas = "<button class='btn btn-warning btn-xs btn-block'>NOT YET</button>";
                        if(value.odp_location_lapangan != null){
                            odp_lapangan = `<button class='btn btn-warning btn-xs detailPelanggan' data-odp="${value.odp_location_lapangan}">${value.odp_location_lapangan}</button>`;
                        }
                        if(value.odp_location_uim != null){
                            odp_uim = `<button class='btn btn-warning btn-xs detailPelanggan' data-odp="${value.odp_location_uim}">${value.odp_location_uim}</button>`;
                        }
                    }
                    switch (value.type) {
                        case '1':
                            status = `<button class="btn btn-purple btn-xs btn-block">Teridentifikasi</button>`;
                            break;
                        case '2':
                            status = `<button class="btn btn-dark btn-xs btn-block">Tidak Teridentifikasi</button>`;
                            break;
                        case '3':
                            status = `<button class="btn btn-danger btn-xs btn-block">Rusak</button>`;
                            break;
                        case '4':
                            status = `<button class="btn btn-success btn-xs btn-block">Idle</button>`;
                            break;
                        default:
                            status = `<center>-<center>`;
                            break;
                    }
                    tableCompare.append(`
                        <tr>
                            <td style="white-space:nowrap;">${value.clid}</td>
                            <td style="white-space:nowrap;">1-${value.slot}-${value.port}</td>
                            <td>-</td>
                            <td>-</td>
                            <td style="white-space:nowrap;">${value.nd_inet}</td>
                            <td>${(value.qr_code_dropcore != null ? value.qr_code_dropcore : '-')}</td>
                            <td style="white-space:nowrap;">${status}</td>
                            <td>${value.rx_power_onu}</td>
                            <td style="white-space:nowrap;">${odp_lapangan}</td>
                            <td style="white-space:nowrap;">${odp_uim}</td>
                            <td style="white-space:nowrap;">${validitas}</td>
                        </tr>
                    `);
                });
                $('.nav-tabs a[href="#data-compare"]').tab('show');
            }else{
                $.niftyNoty({
                    type: 'danger',
                    icon: 'pli-like-2 icon-2x',
                    message: response.message,
                    container: 'floating',
                    timer: 5000
                });
            }
        }).done(function(){
            $('.nav-tabs a[href="#data-compare"]').tab('show');
        });
    }
</script>
</body>
</html>
